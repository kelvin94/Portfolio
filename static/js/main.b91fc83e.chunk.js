(this["webpackJsonpkelvin-porfolio"]=this["webpackJsonpkelvin-porfolio"]||[]).push([[0],{46:function(e,t,a){e.exports=a(74)},53:function(e,t){},72:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),c=a.n(r),s=a(7),o=a(77),u=a(76),m=a(40),i=a(9),d=function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2);a[0],a[1];return l.a.createElement("div",null,e.message?l.a.createElement(i.a,{variant:"danger",onClose:function(){return e.setFrontEndMessage("")},dismissible:!0},l.a.createElement(i.a.Heading,null,"Oh snap! You got an error!"),l.a.createElement("p",null,e.message)):"")},p=function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2);a[0],a[1];return e.message?0==e.message.state?l.a.createElement("div",null,l.a.createElement(i.a,{variant:"danger",onClose:function(){return e.setBackEndMessage({state:null,message:""})},dismissible:!0},l.a.createElement(i.a.Heading,null,"Oh snap! You got an error!"),l.a.createElement("p",null,e.message.message))):1==e.message.state?l.a.createElement("div",null,l.a.createElement(i.a,{variant:"success",onClose:function(){return e.setBackEndMessage({state:null,message:""})},dismissible:!0},l.a.createElement(i.a.Heading,null,"Oh snap! You got an success msg!"),l.a.createElement("p",null,e.message.message))):null:l.a.createElement("div",null)},E=function(e){return l.a.createElement("div",null,l.a.createElement("h5",null,"Response msg from front end and back end"),l.a.createElement("p",null,"Note-1: You can't repeatedly buy same product with same phone number, the request will not hit the db, caching service will catch you repeatedly buy and return response asap."),l.a.createElement("p",null,"Note-2: If purchase is successful, lefthand side product list's stock count will be updated."),e.frontEndMessage?l.a.createElement(d,{message:e.frontEndMessage,setFrontEndMessage:e.setFrontEndMessage}):"",e.backEndMessage?l.a.createElement(p,{message:e.backEndMessage,setBackEndMessage:e.setBackEndMessage}):"")},g=function(){return l.a.createElement("header",null,l.a.createElement("h1",null,"Kelvin"))},f=a(37),b=a(42),h=(a(53),a(12)),v=a.n(h),y=a(16),k=function(e){return l.a.createElement("div",null,l.a.createElement(y.a,null,l.a.createElement(y.a.Body,null,l.a.createElement(y.a.Title,null,"Product: ",e.product.title),l.a.createElement(y.a.Text,null,l.a.createElement("p",null,"MSRP: ",e.product.price),l.a.createElement("p",null,"Discounted price: ",e.product.seckill_price),l.a.createElement("p",null,"Current stock count: ",e.product.stockCount)))))};function j(){var e=Object(f.a)(["\n        margin: 0 auto;\n        align-items: center;\n        \n        /* display: flex;\n        flex-direction: column;\n        justify-content: space-around; */\n        border-radius: 15px;\n    "]);return j=function(){return e},e}var O=function(e){var t=b.a.div(j());return l.a.createElement(t,null,e.offers.map((function(e){return l.a.createElement(k,{key:e.seckillSwagId,product:e})})))},M=a(10),S=a(41),C=a(21),P=a(19),x=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),d=i[0],p=i[1],E=Object(n.useRef)(null);return l.a.createElement("div",null,l.a.createElement(u.a,null,l.a.createElement(m.a,{className:"mb-12"},l.a.createElement(P.a,{className:"mb-12"},l.a.createElement(S.a,{placeholder:"Generate phone number","aria-label":"Generate phone number","aria-describedby":"basic-addon2",value:r,ref:E}),l.a.createElement(P.a.Append,null,l.a.createElement(C.a,{variant:"outline-secondary",onClick:function(e){return function(e){e.preventDefault();c("".concat(Math.floor(Math.pow(10,8)+9*Math.random()*Math.pow(10,8))))}(e)}},"Generate"))),l.a.createElement(P.a,{className:"mb-12"},document.queryCommandSupported("copy")&&l.a.createElement("div",null,l.a.createElement(C.a,{variant:"outline-secondary",onClick:function(e){E.current.select(),document.execCommand("copy"),e.target.focus(),p("Copied!")}},"Copy Generated PhoneNumber"),d)))),l.a.createElement(u.a,null,l.a.createElement(m.a,{className:"mb-12"},l.a.createElement(M.a,null,l.a.createElement(M.a.Group,{controlId:"exampleForm.ControlSelect1"},l.a.createElement(M.a.Label,null,"select a product"),l.a.createElement(M.a.Control,{as:"select",onChange:function(t){e.setSelectedProduct(t.target.value),function(t){var a="http://disseckill.jyl69.xyz:8080/export/url/".concat(t);v.a.get(a).then((function(t){console.log(t.data),e.setMd5HashedUrl(t.data.md5Url),e.setDealPrice(t.data.seckill_price)}))}(t.target.value)}},l.a.createElement("option",{value:""}),e.offers.map((function(e){return l.a.createElement("option",{key:e.seckillSwagId,value:e.seckillSwagId},"Product ID: ",e.seckillSwagId,", ",e.title)})))),l.a.createElement(M.a.Group,{controlId:"formPhoneNumber"},l.a.createElement(M.a.Label,null,"phone number"),l.a.createElement(M.a.Control,{type:"number",placeholder:"Enter phone number",onChange:function(t){e.setPhoneNumber(t.target.value)}}),l.a.createElement(M.a.Text,{className:"text-muted"},"Pls use the randomly generated number above for testing.")),l.a.createElement(C.a,{variant:"primary",onClick:function(t){return e.handleBuy(t)}},"Buy")))))},w=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),d=Object(s.a)(i,2),p=d[0],f=d[1],b=Object(n.useState)({state:null,message:""}),h=Object(s.a)(b,2),y=h[0],k=h[1],j=Object(n.useState)(""),M=Object(s.a)(j,2),S=M[0],C=M[1],P=Object(n.useState)(""),w=Object(s.a)(P,2),N=w[0],I=w[1],B=Object(n.useState)(""),D=Object(s.a)(B,2),G=D[0],F=D[1],H=Object(n.useState)(""),U=Object(s.a)(H,2),R=U[0],T=U[1],Y=function(){v.a.get("http://disseckill.jyl69.xyz:8080/swag").then((function(e){console.log(e.data),c(e.data)}))};return Object(n.useEffect)((function(){Y()}),[]),l.a.createElement(o.a,{className:"App"},l.a.createElement(u.a,null,l.a.createElement(m.a,null,l.a.createElement(g,null))),l.a.createElement(u.a,null,l.a.createElement(m.a,{xs:4,md:3},l.a.createElement(O,{offers:r})),l.a.createElement(m.a,{xs:4,md:5},l.a.createElement(E,{frontEndMessage:p,setFrontEndMessage:f,backEndMessage:y,setBackEndMessage:k})),l.a.createElement(m.a,{xs:4,md:4},l.a.createElement(x,{offers:r,handleBuy:function(e){if(e.preventDefault(),console.log(e.target.value),console.log("selectedProduct "+S),R)if(S)if(G&&N){var t={seckillSwagId:S,dealPrice:G,userPhone:parseInt(R),md5Url:N};v.a.post("http://disseckill.jyl69.xyz:8080/swag",t,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e.data),1==e.data.state&&k({state:1,message:"Purchase success"}),Y()}),(function(e){console.log("in error"),console.log(e.response.data),console.log(e.response.data.message),k({state:0,message:e.response.data.message}),Y()}))}else f("Order API not generating MD5 hashed URL.");else f("Selected product cannot be empty");else f("PhoneNumber cannot be empty")},setSelectedProduct:C,setMd5HashedUrl:I,setDealPrice:F,setPhoneNumber:T}))))};a(72),a(73);c.a.render(l.a.createElement(w,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.b91fc83e.chunk.js.map